(()=>{"use strict";const e=(()=>{const e=document.getElementById("add-quest-button"),t=document.getElementById("nav-items");let n=[{name:"Daily Commissions",commissions:[]}],o=n[0];function s(e){for(const e of document.querySelectorAll(".quest-item-a"))e.textContent.includes(o.name)&&e.classList.remove("current-quest");o=e;for(const e of document.querySelectorAll(".quest-item-a"))e.textContent.includes(o.name)&&e.classList.add("current-quest")}function c(e){const t={name:e,commissions:[]};return n.push(t),localStorage.setItem(`${t.name}`,JSON.stringify(t)),console.log("in createQuest. local storage: "+localStorage),t}function i(e,n){const o=document.createElement("li");o.classList.add("quest-item");const c=document.createElement("a");c.classList.add("quest-item-a"),c.textContent=e,c.addEventListener("click",(()=>{l(n),s(n)})),o.appendChild(c),t.appendChild(o)}function l(e){a(),0!==e.commissions.length&&u(e)}function a(){document.querySelectorAll(".commissions-item").forEach((e=>e.remove()))}e.addEventListener("click",(()=>{const e=document.createElement("input");e.type="text",e.classList.add("input-textbox"),t.appendChild(e);const n=document.createElement("button");n.textContent="Add",n.addEventListener("click",(()=>{const t=e.value;e.remove(),n.remove(),i(t,c(t))})),t.appendChild(n)}));const m=document.getElementById("commissions-ul"),d=document.getElementById("add-commissions-button");function r(e,t){const n={name:e};return t.commissions.push(n),localStorage.setItem(`${t.name}`,JSON.stringify(t)),n}function u(e){e.commissions.forEach((t=>{g(t,e)}))}function g(e,t){const n=document.createElement("li");n.classList.add("commissions-item");const o=document.createElement("div");o.classList.add("commissions-item-left");const s=document.createElement("img");var c;s.classList.add("commission-img"),s.src="./assets/Icon-Commission.png",(c=s).addEventListener("click",(e=>{const t=c.nextElementSibling,n=t.querySelector(".commissions-title").textContent,o=t.querySelector(".commission-quest-tag").textContent,s=JSON.parse(localStorage.getItem(`${o}`)),i=s.commissions,l=i.findIndex((e=>e.name===n));i.splice(l,1),e.target.closest(".commissions-item").remove(),localStorage.setItem(`${s.name}`,JSON.stringify(s))}));const i=document.createElement("div");i.classList.add("comm-info-div");const l=document.createElement("h3");l.classList.add("commissions-title"),l.textContent=e.name;const a=document.createElement("h4");a.classList.add("commission-quest-tag"),a.textContent=t.name,o.appendChild(s),i.appendChild(l),i.appendChild(a),o.appendChild(i),n.appendChild(o),m.insertBefore(n,d)}function p(){a(),s(n[0]);for(let e=0;e<localStorage.length;e++)u(JSON.parse(localStorage.getItem(localStorage.key(e))))}return d.addEventListener("click",(()=>{const e=document.createElement("div");e.classList.add("input-div");const t=document.createElement("input");t.type="text",t.classList.add("input-textbox"),e.appendChild(t);const n=document.createElement("button");n.textContent="Add",n.addEventListener("click",(()=>{const n=t.value;e.remove(),g(r(n,o),o)})),e.appendChild(n),m.appendChild(e)})),document.getElementById("daily-commissions").addEventListener("click",(()=>{p()})),{createQuest:c,addQuestToNav:i,createCommission:r,loadQuest:l,setStyles:function(){if(0==localStorage.length)localStorage.setItem("Daily Commissions",JSON.stringify(n[0]));else{for(let e=1;e<localStorage.length;e++){let t=localStorage.getItem(localStorage.key(e)),n=JSON.parse(t);console.log(n.name),i(n.name,n)}p()}}}})(),t=e;console.log(localStorage.length);for(let e=0;e<localStorage.length;e++)console.log(JSON.stringify(localStorage.getItem(localStorage.key(e))));t.setStyles()})();